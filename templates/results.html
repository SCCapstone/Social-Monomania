{% extends "search_template.html" %}
{% block title %}Results{% endblock title %}



{% block content %}
<p> You searched for: <b>{{ searchQuery }}</b></p>
<p id='searchQ'></p>
<a class="s_button" href="{% url 'download'%}" id='DownloadButton' >Export Data</a>
<br>
<br>
<button onclick="wordCloudFunction()">Click to show/hide Word Cloud feature</button>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.10.2.js"></script>
<div id="wordCloud" style="display:none">
<li>On results page, CTRL+A to select all</li>
<li>CTRL+C to copy selected text</li>
<li>Click inside "Word It Out" Original text box</li>
<li>Paste into box with CTRL+V</li>
<li>Click green Generate button to view word cloud</li>
<iframe src="https://worditout.com/word-cloud/create" height="500" width="100%"> </iframe>
</div>

<button onclick="displayGraph()">TEST CHART.JS</button>
<div id="lineGraph" style="height:800px; width:800px; display:none;vertical-align: bottom;margin-left:auto;margin-right:auto">

</div>

<div class="row">
  <div class="column">
	  <h3> Reddit Object </h3>
		{% for entry, sub in redditReturn.iteritems|slice:":50" %}
		<div id='redditResult' style="border-style: solid; margin: 14px; padding: 10px;">
        	<h6 style="margin:10px" id='redditDate' > <em>{{ sub.time }} </em> </h6>
        	<p id='redditTitle'>{{ entry.title }}</p>
        	<a id='redditUrl' href="{{ sub.url }}">Reddit Link</a>
   		</div>
		{% endfor %}
  </div>
  <div class="column" id='Twitter'>
  		<h3>Twitter Object </h3>
		{% for entry in twitterReturn.statuses|slice:":50" %}
		<div id='twitterResult' style="border-style: solid; margin: 10px; padding: 10px;">
			<h6 style="margin:10px" id='twitterDate'> {{entry.created_at}} </h6>
			<p id='twitterText'>Text: {{ entry.text }}</p>
			<div style="margin-bottom: 10px;text-align: center;">
			<h6 style="margin:auto;width:auto;display:inline-block;" id='twitterUser'> User Screen Name: <br> {{ entry.user.screen_name }}</h6>
			<h6 style="margin:auto;width:auto;display:inline-block;" id='twitterUser'> User Name: <br> {{ entry.user.name }}</h6>
			<h6 style="margin:auto;width:auto;display:inline-block;" id='twitterUser'> Retweets: <br> {{ entry.retweet_count }}</h6>
			<h6 style="margin:auto;width:auto;display:inline-block;" id='twitterUser'> Favorited Count: <br> {{ entry.favorite_count }}</h6>
			</div>
			<a href="https://www.twitter.com/statuses/{{ entry.id }}" target="_blank">Link to Tweet</a>
			<!--<img src= "isImage({{entity.media.0.type}})" />-->
			{% for x in entry.extended_entities %}
			<!--<p>Test Entities: {{ x }}</p>-->
			{% if x %}
			{% for z in entry.extended_entities.media %}
			<!--<p>Test: {{ z }}</p>-->
			<a href="{{ z.media_url }}">Link to Image/Media</a>
			<br>
			<img src="{{ z.media_url }}" alt="Twitter Img" height="250" width="250">
			<br>
			{% endfor %}
			{% endif %}
			{% endfor %}
		</div>
		{% endfor %}
  </div>
</div>



		<!-- Might want to use a template function to do a foreach in both of these objects to display -->


<!--
<div id="demo" style="height:800px; width:800px; display:none;vertical-align: bottom;margin-left:auto;margin-right:auto"> </div>
 -->
 <form action='/search/'>
 	<button  id='s_button'>New Search</button>
</form>
<!--
the function wordCloudFunction() is used to hide/reveal the word cloud feature
-->
<script>

function displayGraph() {
	var x = document.getElementById("lineGraph");
	if(x.style.display == "none"){
		document.getElementById("lineGraph").style.display = "block";
		document.getElementById("lineGraph").innerHTML = '<object type="text/html" style="width:100%;height:100%" data="{% url 'graph' %}" > </object> ';
	} else {
		x.style.display = "none";
	}

}

function wordCloudFunction(){
	var x = document.getElementById("wordCloud");
	if(x.style.display == "none"){
		x.style.display = "block";
	} else {
		x.style.display = "none";
	}
}

function

window.onload = highlight({{searchQuery}}) {
  var inputText = document.getElementById("inputText");
  var innerHTML = inputText.innerHTML;
  var index = innerHTML.indexOf(text);
  if (index >= 0) {
   innerHTML = innerHTML.substring(0,index) + "<span class='highlight'>" + innerHTML.substring(index,index+text.length) + "</span>" + innerHTML.substring(index + text.length);
   inputText.innerHTML = innerHTML;
   console.log("highlight: " {{searchQuery}});
  }
}
</script>


{% endblock content %}
