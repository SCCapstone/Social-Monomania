{% extends "layout.html" %}
{% block title %}Results{% endblock title %}



{% block content %}

<p> You searched for: {{ searchQuery }}</p>
<p id='searchQ'></p>
<a class="s_button" href="{% url 'download'%}" id='DownloadButton' >Export Data</a>
<br>
<br>
<button onclick="wordCloudFunction()">Click to show/hide Word Cloud feature</button>

<div id="wordCloud" style="display:none">
<li>On results page, CTRL+A to select all</li>
<li>CTRL+C to copy selected text</li>
<li>Click inside "Word It Out" Original text box</li>
<li>Paste into box with CTRL+V</li>
<li>Click green Generate button to view word cloud</li>
<iframe src="https://worditout.com/word-cloud/create" height="500" width="100%"> </iframe>
</div>

<div class="row">
  <div class="column">
	  <p> Reddit Object </p>
		{% for entry, sub in redditReturn.iteritems|slice:":50" %}
		<div id='redditResult' style="border-style: solid; margin: 10px; padding: 10px;">
        	<h6 id='redditDate' >{{ sub.time }} </h6>
        	<h4 id='redditTitle'>{{ entry.title }}</h4>
        	<a id='redditUrl' href="{{ sub.url }}">Reddit Link</a>  
   		</div>
		{% endfor %}
  </div>
  <div class="column" id='Twitter'>
  		<p>Twitter Object </p>
		{% for entry in twitterReturn.statuses|slice:":50" %}
		<div id='twitterResult' style="border-style: solid; margin: 10px; padding: 10px;"> 
			<h6 id='twitterDate'> {{entry.created_at}} </h6>
			<h4 id='twitterText'>Text: {{ entry.text }}</h4>
			<h6 id='twitterUser'> User Screen Name: {{ entry.user.screen_name }} / </h6>
			<h6 id='twitterUser'> User Name: {{ entry.user.name }} / </h6>
			<h6 id='twitterUser'> Retweets: {{ entry.retweet_count }} / </h6>
			<h6 id='twitterUser'> Favorited Count: {{ entry.favorite_count }}</h6>
			<a href="https://www.twitter.com/statuses/{{ entry.id }}" target="_blank">Link to Tweet</a>
			<!--<img src= "isImage({{entity.media.0.type}})" />-->
			{% for x in entry.extended_entities %}
			<!--<p>Test Entities: {{ x }}</p>-->
			{% if x %}
			{% for z in entry.extended_entities.media %}
			<!--<p>Test: {{ z }}</p>-->
			<a href="{{ z.media_url }}">Link to Image/Media</a>
			{% endfor %}
			{% endif %}
			{% endfor %}
		</div>
		{% endfor %}
  </div>
</div>
		

		
		<!-- Might want to use a template function to do a foreach in both of these objects to display -->

    	
<!-- 
<div id="demo" style="height:800px; width:800px; display:none;vertical-align: bottom;margin-left:auto;margin-right:auto"> </div>
 -->

<a href="{% url 'search' %}" class='button'>New Search</a>  

<!--
the function wordCloudFunction() is used to hide/reveal the word cloud feature
-->
<script>
function isImage(type)
{
	if (type == "photo")
		return {{ entity.media.0.display_url}}
}


function wordCloudFunction(){
	var x = document.getElementById("wordCloud");
	if(x.style.display == "none"){
		x.style.display = "block";
	} else {
		x.style.display = "none";
	}
}
</script>

<script type="text/javascript" language="javascript">

function my_code(){
//Finds the URL, makes the substring of it, and applies to your search query
var longTerm = window.location.search;
var term = longTerm.substring(3,longTerm.indexOf('&'));
document.getElementById("searchQ").innerHTML = longTerm;

}


window.onload= 'my_code()';
</script>



 
{% endblock content %}
  
